<!DOCTYPE html>
<html>
<head>
  <title>Create and Join Capsules</title>
  <script src="/socket.io/socket.io.js"></script>
  <link rel="stylesheet" href="home.css">
</head>
<body>
  <header>
    <nav class="navbar">
        <ul class="navbar-menu">
          <li class="navbar-item" id="showCapsules"><a href="/home">Home</a></li>
          <li class="navbar-item" id="search"><a href="/search">search</a></li>
          <li class="navbar-item" id="createCapsule"><a href="/createCapsule">create Capsules</a></li>
        </ul>
      </nav>
      <h1>Welcome to the chat</h1>
    </header>
    <main>
        <textarea name="message" id="message" cols="30" rows="10"></textarea>
        <button id="sendMessage">Send message</button>
    </main>
  <script>
    let serverIP = '';
    fetch('/ip')
    .then(response => response.text())
    .then(data => {
        const serverIP = data;
        console.log(serverIP);
    })
    const socket = io(`http://${serverIP}:8080`);

    const button = document.getElementById('sendMessage');
    const message = document.getElementById('message').value;

    button.addEventListener('click', () => {
        socket.emit('sendMessage', { message,  });
    })
</script>
</body>
</html>
